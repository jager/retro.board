<div class="row">
  <div class="col-md-12">
    <div class="card mb-4">
      <div class="card-header pb-0">
        <h6 class="card-title">Użytkownicy</h6>
      </div>
      <div class="card-body px-0 pt-0 pb-2">
        <div class="table-responsive p-0">
          <table class="table align-items-center mb-0">
            <thead>
              <tr>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">ID</th>
                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Użytkownik</th>
                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Funkcja</th>
                <th class="text-secondary opacity-7"></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let master of scrumMasters" (click)="selectUser(master)">
                <td class="align-middle text-center text-secondary font-weight-bold text-xs">{{master.id}}</td>
                <td>
                  <div class="d-flex px-2 py-1">
                    <div>
                      <img [src]="getAvatar(master.name)" class="avatar avatar-sm me-3" alt="user1">
                    </div>
                    <div class="d-flex flex-column justify-content-center">
                      <h6 class="mb-0 text-sm">{{master.name}}</h6>
                      <p class="text-xs text-secondary mb-0">{{master.email}}</p>
                    </div>
                  </div>
                </td>
                <td>
                  <p class="text-xs font-weight-bold mb-0">{{master.login}}</p>
                  <p class="text-xs text-secondary mb-0">{{master.role.name}}</p>
                </td>
                <td class="align-middle">
                  <a class="btn btn-link text-dark text-sm mb-0 px-0 ms-4"><fa-icon [icon]="penIcon"></fa-icon></a>
                  <a class="btn btn-link text-dark text-sm mb-0 px-0 ms-4"><fa-icon [icon]="trashIcon"></fa-icon></a></td>
              </tr>
            </tbody>
          </table>
      </div>
      </div>
      <!-- /.card-body -->
    </div>
    <!-- /.card -->
  </div>
</div>
<div class="row" *ngIf="selectedUser != null">
  <div class="col-md-3">
    <div class="card mb-4">
      <div class="card-header pb-0">
        <h6 class="card-title">Wybrany użytkownik</h6>

        <!-- <div class="card-tools">
          <button type="button" class="btn btn-tool" title="Edytuj">
            <fa-icon [icon]="penIcon"></fa-icon>
          </button>
          <button type="button" class="btn btn-tool" title="Usuń">
            <fa-icon [icon]="trashIcon"></fa-icon>
          </button>
          <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
            <i class="fas fa-minus"></i>
          </button>
        </div> -->
      </div>
      <div class="card-body">
        <div class="text-center">
          <img class="profile-user-img img-fluid img-circle"
               [src]="avatarLink"
               [alt]="selectedUser.name" />
        </div>

        <h5 class="card-title text-center mb-1">{{selectedUser.name}}</h5>

        <p class="category text-center text-info text-gradient">{{selectedUser.role.name}}</p>

        <ul class="list-group" *ngIf="selectedUser.teams.length > 0">
          <li class="list-group-item border-0 d-flex align-items-center px-0 mb-2" *ngFor="let team of selectedUser.teams" (click)="selectTeam(team)">
            <div class="d-flex align-items-start flex-column justify-content-center">
              <h6 class="mb-0 text-sm">{{team.name}}</h6>
            </div>
            <a class="btn btn-link pe-3 ps-0 mb-0 ms-auto">{{team.boards.length}}</a>
          </li>
        </ul>

        <div class="row">
            <div class="col-md-8">
              <input type="text" class="form-control" placeholder="Nowy zespół" [(ngModel)]="newTeamName" name="newTeamName" />
            </div>
            <div class="col-md-4">
              <button type="button" class="btn btn-success" (click)="addNewTeam(newTeamName)">Dodaj</button>
            </div>
        </div>

      </div>
      <!-- /.card-body -->
    </div>
    <!-- /.card -->
  </div>
  <div class="col-md-9">
    <div class="card mb-4">
      <div class="card-header pb-0">
        <h6 class="card-title">{{selectedTeam != null ? selectedTeam.name : "Wybierz zespół"}}</h6>
      </div>
      <div class="card-body">
        <div class="table-responsive pb-0">
          <table class="table align-items-center mb-0">
            <thead>
              <tr>
                  <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">ID</th>
                  <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Nazwa boarda</th>
                  <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Czas aktywności</th>
                  <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Status</th>
                  <th class="text-secondary opacity-7" colspan="4"></th>
              </tr>
            </thead>
            <tfoot *ngIf="selectedTeam != null">
              <tr>
                <td colspan="2"><input type="text" class="form-control" placeholder="Nowy board" [(ngModel)]="newBoardName" name="newBoardName" /></td>
                <td><input type="datetime-local" id="example-datetime-local-input" onfocus="focused(this)" onfocusout="defocused(this)" class="form-control" placeholder="Od" [(ngModel)]="newBoardActiveFrom" name="newBoardActiveFrom" /></td>
                <td>
                  <input type="datetime-local" id="example-datetime-local-input" onfocus="focused(this)" onfocusout="defocused(this)" class="form-control" placeholder="Do" [(ngModel)]="newBoardActiveTo" name="newBoardActiveTo" />
                </td>
                <td colspan="2" class="align-middle"><button type="button" class="btn btn-success btn-small" (click)="addNewBoard(newBoardName, newBoardActiveFrom, newBoardActiveTo)">Dodaj board</button></td>
                <td colspan="2"></td>
              </tr>
            </tfoot>
            <tbody *ngIf="selectedTeam != null && selectedTeam.boards.length > 0">
              <tr *ngFor="let board of selectedTeam.boards">
                <td *ngIf="board.id > 0"  class="align-middle text-center text-secondary font-weight-bold text-xs">{{board.id}}</td>
                <td *ngIf="board.id <= 0" class="align-middle text-center text-secondary font-weight-bold text-xs"><span class="badge bg-danger">Nowy</span></td>
                <td><h6 class="mb-0 text-sm">{{board.name}}</h6></td>
                <td>
                  <p class="text-xs font-weight-bold mb-0">OD: {{board.activeFrom}}</p>
                  <p class="text-xs font-weight-bold mb-0">DO: {{board.activeTo}}</p>
                </td>
                <td style="text-align:center">
                  <span *ngIf="board.active" class="badge badge-pill bg-gradient-success"><fa-icon [icon]="checkIcon"></fa-icon></span>
                  <span *ngIf="!board.active" class="badge badge-pill bg-gradient-danger"><fa-icon [icon]="lockIcon"></fa-icon></span>
                </td>
                <td><a class="btn btn-link text-dark text-sm mb-0 px-0 ms-4"><fa-icon [icon]="copyIcon"></fa-icon></a></td>
                <td><a class="btn btn-link text-dark text-sm mb-0 px-0 ms-4"><fa-icon [icon]="linkIcon"></fa-icon></a></td>
                <td><a class="btn btn-link text-dark text-sm mb-0 px-0 ms-4"><fa-icon [icon]="penIcon"></fa-icon></a></td>
                <td><a class="btn btn-link text-dark text-sm mb-0 px-0 ms-4"><fa-icon [icon]="trashIcon"></fa-icon></a></td>
              </tr>

            </tbody>
            <tbody *ngIf="selectedTeam == null || selectedTeam.boards.length == 0">
              <tr>
                <td colspan="6">Brak boardów do wyświetlenia.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!-- /.card-body -->
    </div>
    <!-- /.card -->
  </div>
</div>
